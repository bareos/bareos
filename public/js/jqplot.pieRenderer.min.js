!function(e){function t(e){return Math.sin((e-(e-Math.PI)/8/Math.PI)/2)}function i(e,i,s,r,n){var a=0,h=i-e,l=Math.abs(h),o=s;return 0==r&&(o+=n),o>0&&l>.01&&6.282>l&&(a=parseFloat(o)/2/t(h)),a}function s(t,i,s){s=s||{},s.axesDefaults=s.axesDefaults||{},s.legend=s.legend||{},s.seriesDefaults=s.seriesDefaults||{};var r=!1;if(s.seriesDefaults.renderer==e.jqplot.PieRenderer)r=!0;else if(s.series)for(var n=0;n<s.series.length;n++)s.series[n].renderer==e.jqplot.PieRenderer&&(r=!0);r&&(s.axesDefaults.renderer=e.jqplot.PieAxisRenderer,s.legend.renderer=s.legend.renderer||e.jqplot.PieLegendRenderer,s.legend.preDraw=!0,s.seriesDefaults.pointLabels={show:!1})}function r(t,i,s){for(var r=0;r<this.series.length;r++)this.series[r].renderer.constructor==e.jqplot.PieRenderer&&this.series[r].highlightMouseOver&&(this.series[r].highlightMouseDown=!1)}function n(t){for(var i=0;i<this.series.length;i++)this.series[i].seriesColors=this.seriesColors,this.series[i].colorGenerator=e.jqplot.colorGenerator}function a(e,t,i){if(e.series[t].showSlice[i]){var s=e.series[t],r=e.plugins.pieRenderer.highlightCanvas;r._ctx.clearRect(0,0,r._ctx.canvas.width,r._ctx.canvas.height),s._highlightedPoint=i,e.plugins.pieRenderer.highlightedSeriesIndex=t,s.renderer.drawSlice.call(s,r._ctx,s._sliceAngles[i][0],s._sliceAngles[i][1],s.highlightColorGenerator.get(i),!1)}}function h(e){var t=e.plugins.pieRenderer.highlightCanvas;t._ctx.clearRect(0,0,t._ctx.canvas.width,t._ctx.canvas.height);for(var i=0;i<e.series.length;i++)e.series[i]._highlightedPoint=null;e.plugins.pieRenderer.highlightedSeriesIndex=null,e.target.trigger("jqplotDataUnhighlight")}function l(e,t,i,s,r){if(s){var n=[s.seriesIndex,s.pointIndex,s.data],l=jQuery.Event("jqplotDataMouseOver");if(l.pageX=e.pageX,l.pageY=e.pageY,r.target.trigger(l,n),r.series[n[0]].highlightMouseOver&&(n[0]!=r.plugins.pieRenderer.highlightedSeriesIndex||n[1]!=r.series[n[0]]._highlightedPoint)){var o=jQuery.Event("jqplotDataHighlight");o.which=e.which,o.pageX=e.pageX,o.pageY=e.pageY,r.target.trigger(o,n),a(r,n[0],n[1])}}else null==s&&h(r)}function o(e,t,i,s,r){if(s){var n=[s.seriesIndex,s.pointIndex,s.data];if(r.series[n[0]].highlightMouseDown&&(n[0]!=r.plugins.pieRenderer.highlightedSeriesIndex||n[1]!=r.series[n[0]]._highlightedPoint)){var l=jQuery.Event("jqplotDataHighlight");l.which=e.which,l.pageX=e.pageX,l.pageY=e.pageY,r.target.trigger(l,n),a(r,n[0],n[1])}}else null==s&&h(r)}function d(e,t,i,s,r){var n=r.plugins.pieRenderer.highlightedSeriesIndex;null!=n&&r.series[n].highlightMouseDown&&h(r)}function g(e,t,i,s,r){if(s){var n=[s.seriesIndex,s.pointIndex,s.data],a=jQuery.Event("jqplotDataClick");a.which=e.which,a.pageX=e.pageX,a.pageY=e.pageY,r.target.trigger(a,n)}}function p(e,t,i,s,r){if(s){var n=[s.seriesIndex,s.pointIndex,s.data],a=r.plugins.pieRenderer.highlightedSeriesIndex;null!=a&&r.series[a].highlightMouseDown&&h(r);var l=jQuery.Event("jqplotDataRightClick");l.which=e.which,l.pageX=e.pageX,l.pageY=e.pageY,r.target.trigger(l,n)}}function c(){this.plugins.pieRenderer&&this.plugins.pieRenderer.highlightCanvas&&(this.plugins.pieRenderer.highlightCanvas.resetCanvas(),this.plugins.pieRenderer.highlightCanvas=null),this.plugins.pieRenderer={highlightedSeriesIndex:null},this.plugins.pieRenderer.highlightCanvas=new e.jqplot.GenericCanvas;var t=e(this.targetId+" .jqplot-data-label");t.length?e(t[0]).before(this.plugins.pieRenderer.highlightCanvas.createElement(this._gridPadding,"jqplot-pieRenderer-highlight-canvas",this._plotDimensions,this)):this.eventCanvas._elem.before(this.plugins.pieRenderer.highlightCanvas.createElement(this._gridPadding,"jqplot-pieRenderer-highlight-canvas",this._plotDimensions,this));this.plugins.pieRenderer.highlightCanvas.setContext();this.eventCanvas._elem.bind("mouseleave",{plot:this},function(e){h(e.data.plot)})}e.jqplot.PieRenderer=function(){e.jqplot.LineRenderer.call(this)},e.jqplot.PieRenderer.prototype=new e.jqplot.LineRenderer,e.jqplot.PieRenderer.prototype.constructor=e.jqplot.PieRenderer,e.jqplot.PieRenderer.prototype.init=function(t,i){if(this.diameter=null,this.padding=20,this.sliceMargin=0,this.fill=!0,this.shadowOffset=2,this.shadowAlpha=.07,this.shadowDepth=5,this.highlightMouseOver=!0,this.highlightMouseDown=!1,this.highlightColors=[],this.dataLabels="percent",this.showDataLabels=!1,this.dataLabelFormatString=null,this.dataLabelThreshold=3,this.dataLabelPositionFactor=.52,this.dataLabelNudge=2,this.dataLabelCenterOn=!0,this.startAngle=0,this.tickRenderer=e.jqplot.PieTickRenderer,this.showSlice=[],this._drawData=!0,this._type="pie",t.highlightMouseDown&&null==t.highlightMouseOver&&(t.highlightMouseOver=!1),e.extend(!0,this,t),this.sliceMargin<0&&(this.sliceMargin=0),this._diameter=null,this._radius=null,this._sliceAngles=[],this._highlightedPoint=null,0==this.highlightColors.length)for(var s=0;s<this.seriesColors.length;s++){for(var a=e.jqplot.getColorComponents(this.seriesColors[s]),h=[a[0],a[1],a[2]],u=h[0]+h[1]+h[2],f=0;3>f;f++)h[f]=u>570?.8*h[f]:h[f]+.3*(255-h[f]),h[f]=parseInt(h[f],10);this.highlightColors.push("rgb("+h[0]+","+h[1]+","+h[2]+")")}this.highlightColorGenerator=new e.jqplot.ColorGenerator(this.highlightColors),i.postParseOptionsHooks.addOnce(n),i.postInitHooks.addOnce(r),i.eventListenerHooks.addOnce("jqplotMouseMove",l),i.eventListenerHooks.addOnce("jqplotMouseDown",o),i.eventListenerHooks.addOnce("jqplotMouseUp",d),i.eventListenerHooks.addOnce("jqplotClick",g),i.eventListenerHooks.addOnce("jqplotRightClick",p),i.postDrawHooks.addOnce(c)},e.jqplot.PieRenderer.prototype.setGridData=function(e){var t=[],i=[],s=(this.startAngle/180*Math.PI,0);this._drawData=!1;for(var r=0;r<this.data.length;r++)0!=this.data[r][1]&&(this._drawData=!0,void 0===this.showSlice[r]&&(this.showSlice[r]=!0)),t.push(this.data[r][1]),i.push([this.data[r][0]]),r>0&&(t[r]+=t[r-1]),s+=this.data[r][1];for(var n=2*Math.PI/t[t.length-1],r=0;r<t.length;r++)i[r][1]=t[r]*n,i[r][2]=this.data[r][1]/s;this.gridData=i},e.jqplot.PieRenderer.prototype.makeGridData=function(e,t){var i=[],s=[],r=0;this.startAngle/180*Math.PI;this._drawData=!1;for(var n=0;n<e.length;n++)0!=this.data[n][1]&&(this._drawData=!0),i.push(e[n][1]),s.push([e[n][0]]),n>0&&(i[n]+=i[n-1]),r+=e[n][1];for(var a=2*Math.PI/i[i.length-1],n=0;n<i.length;n++)s[n][1]=i[n]*a,s[n][2]=e[n][1]/r;return s},e.jqplot.PieRenderer.prototype.drawSlice=function(e,t,s,r,n){function a(i){s>6.282+this.startAngle&&(s=6.282+this.startAngle,t>s&&(t=6.281+this.startAngle)),t>=s||(e.beginPath(),e.fillStyle=r,e.strokeStyle=r,e.lineWidth=o,e.arc(0,0,i,t,s,!1),e.lineTo(0,0),e.closePath(),l?e.fill():e.stroke())}if(this._drawData){var h=this._radius,l=this.fill,o=this.lineWidth,d=this.sliceMargin;0==this.fill&&(d+=this.lineWidth),e.save(),e.translate(this._center[0],this._center[1]);var g=i(t,s,this.sliceMargin,this.fill,this.lineWidth),p=g*Math.cos((t+s)/2),c=g*Math.sin((t+s)/2);if(s-t<=Math.PI?h-=g:h+=g,e.translate(p,c),n){for(var u=0,f=this.shadowDepth;f>u;u++)e.save(),e.translate(this.shadowOffset*Math.cos(this.shadowAngle/180*Math.PI),this.shadowOffset*Math.sin(this.shadowAngle/180*Math.PI)),a(h);for(var u=0,f=this.shadowDepth;f>u;u++)e.restore()}else a(h);e.restore()}},e.jqplot.PieRenderer.prototype.draw=function(t,s,r,n){var a,h,l=void 0!=r?r:{},o=0,d=0,g=1,p=new e.jqplot.ColorGenerator(this.seriesColors);if(r.legendInfo&&"insideGrid"==r.legendInfo.placement){var c=r.legendInfo;switch(c.location){case"nw":o=c.width+c.xoffset;break;case"w":o=c.width+c.xoffset;break;case"sw":o=c.width+c.xoffset;break;case"ne":o=c.width+c.xoffset,g=-1;break;case"e":o=c.width+c.xoffset,g=-1;break;case"se":o=c.width+c.xoffset,g=-1;break;case"n":d=c.height+c.yoffset;break;case"s":d=c.height+c.yoffset,g=-1}}var u=(void 0!=l.shadow?l.shadow:this.shadow,void 0!=l.fill?l.fill:this.fill,parseInt(t.canvas.style.width)),f=parseInt(t.canvas.style.height),v=u-o-2*this.padding,w=f-d-2*this.padding,m=Math.min(v,w),j=m;this._sliceAngles=[];var q=this.sliceMargin;0==this.fill&&(q+=this.lineWidth);for(var b,R,_,x,M=0,P=this.startAngle/180*Math.PI,a=0,C=s.length;C>a;a++)R=0==a?P:s[a-1][1]+P,_=s[a][1]+P,this._sliceAngles.push([R,_]),b=i(R,_,this.sliceMargin,this.fill,this.lineWidth),Math.abs(_-R)>Math.PI&&(M=Math.max(b,M));if(null!=this.diameter&&this.diameter>0?this._diameter=this.diameter-2*M:this._diameter=j-2*M,this._diameter<6)return void e.jqplot.log("Diameter of pie too small, not rendering.");this._radius=this._diameter/2;if(this._center=[(u-g*o)/2+g*o+M*Math.cos(P),(f-g*d)/2+g*d+M*Math.sin(P)],this.shadow)for(var a=0,C=s.length;C>a;a++)x="rgba(0,0,0,"+this.shadowAlpha+")",this.renderer.drawSlice.call(this,t,this._sliceAngles[a][0],this._sliceAngles[a][1],x,!0);for(var a=0;a<s.length;a++)if(h=p.next(),this.showSlice[a]&&(this.renderer.drawSlice.call(this,t,this._sliceAngles[a][0],this._sliceAngles[a][1],h,!1),this.showDataLabels&&100*s[a][2]>=this.dataLabelThreshold)){var L,D,k=(this._sliceAngles[a][0]+this._sliceAngles[a][1])/2;"label"==this.dataLabels?(L=this.dataLabelFormatString||"%s",D=e.jqplot.sprintf(L,s[a][0])):"value"==this.dataLabels?(L=this.dataLabelFormatString||"%d",D=e.jqplot.sprintf(L,this.data[a][1])):"percent"==this.dataLabels?(L=this.dataLabelFormatString||"%d%%",D=e.jqplot.sprintf(L,100*s[a][2])):this.dataLabels.constructor==Array&&(L=this.dataLabelFormatString||"%s",D=e.jqplot.sprintf(L,this.dataLabels[a]));var I=this._radius*this.dataLabelPositionFactor+this.sliceMargin+this.dataLabelNudge,y=this._center[0]+Math.cos(k)*I+this.canvas._offsets.left,A=this._center[1]+Math.sin(k)*I+this.canvas._offsets.top,S=e('<div class="jqplot-pie-series jqplot-data-label" style="position:absolute;">'+D+"</div>").insertBefore(n.eventCanvas._elem);this.dataLabelCenterOn?(y-=S.width()/2,A-=S.height()/2):(y-=S.width()*Math.sin(k/2),A-=S.height()/2),y=Math.round(y),A=Math.round(A),S.css({left:y,top:A})}},e.jqplot.PieAxisRenderer=function(){e.jqplot.LinearAxisRenderer.call(this)},e.jqplot.PieAxisRenderer.prototype=new e.jqplot.LinearAxisRenderer,e.jqplot.PieAxisRenderer.prototype.constructor=e.jqplot.PieAxisRenderer,e.jqplot.PieAxisRenderer.prototype.init=function(t){this.tickRenderer=e.jqplot.PieTickRenderer,e.extend(!0,this,t),this._dataBounds={min:0,max:100},this.min=0,this.max=100,this.showTicks=!1,this.ticks=[],this.showMark=!1,this.show=!1},e.jqplot.PieLegendRenderer=function(){e.jqplot.TableLegendRenderer.call(this)},e.jqplot.PieLegendRenderer.prototype=new e.jqplot.TableLegendRenderer,e.jqplot.PieLegendRenderer.prototype.constructor=e.jqplot.PieLegendRenderer,e.jqplot.PieLegendRenderer.prototype.init=function(t){this.numberRows=null,this.numberColumns=null,this.width=null,e.extend(!0,this,t)},e.jqplot.PieLegendRenderer.prototype.draw=function(){if(this.show){var t=this._series;this._elem=e(document.createElement("table")),this._elem.addClass("jqplot-table-legend");var i={position:"absolute"};this.background&&(i.background=this.background),this.border&&(i.border=this.border),this.fontSize&&(i.fontSize=this.fontSize),this.fontFamily&&(i.fontFamily=this.fontFamily),this.textColor&&(i.textColor=this.textColor),null!=this.marginTop&&(i.marginTop=this.marginTop),null!=this.marginBottom&&(i.marginBottom=this.marginBottom),null!=this.marginLeft&&(i.marginLeft=this.marginLeft),null!=this.marginRight&&(i.marginRight=this.marginRight),this._elem.css(i);var s,r,n=!1,a=!1,h=t[0],l=new e.jqplot.ColorGenerator(h.seriesColors);if(h.show){var o=h.data;this.numberRows?(s=this.numberRows,r=this.numberColumns?this.numberColumns:Math.ceil(o.length/s)):this.numberColumns?(r=this.numberColumns,s=Math.ceil(o.length/this.numberColumns)):(s=o.length,r=1);var d,g,p,c,u,f,v,w,m,j,q,b=0;for(d=0;s>d;d++)for(p=e(document.createElement("tr")),p.addClass("jqplot-table-legend"),a?p.prependTo(this._elem):p.appendTo(this._elem),g=0;r>g;g++)b<o.length&&(v="",this.labels[b]?f=this.labels[b]:"object"==typeof o[b][0]?(f=o[b][0][0].toString(),v=o[b][0][1].toString()):f=o[b][0].toString(),m=l.next(),n=a?d==s-1?!1:!0:d>0?!0:!1,w=n?this.rowSpacing:"0",c=e(document.createElement("td")),c.addClass("jqplot-table-legend jqplot-table-legend-swatch"),c.css({textAlign:"center",paddingTop:w}),j=e(document.createElement("div")),j.addClass("jqplot-table-legend-swatch-outline"),""!==v&&j.attr("title",v),q=e(document.createElement("div")),q.addClass("jqplot-table-legend-swatch"),q.css({backgroundColor:m,borderColor:m}),c.append(j.append(q)),u=e(document.createElement("td")),u.addClass("jqplot-table-legend jqplot-table-legend-label"),u.css("paddingTop",w),this.escapeHtml?u.text(f):u.html('<a title="'+v+'">'+f+"</a>"),a?(u.prependTo(p),c.prependTo(p)):(c.appendTo(p),u.appendTo(p)),n=!0),b++}}return this._elem},e.jqplot.PieRenderer.prototype.handleMove=function(e,t,i,s,r){if(s){var n=[s.seriesIndex,s.pointIndex,s.data];r.target.trigger("jqplotDataMouseOver",n),!r.series[n[0]].highlightMouseOver||n[0]==r.plugins.pieRenderer.highlightedSeriesIndex&&n[1]==r.series[n[0]]._highlightedPoint||(r.target.trigger("jqplotDataHighlight",n),a(r,n[0],n[1]))}else null==s&&h(r)},e.jqplot.preInitHooks.push(s),e.jqplot.PieTickRenderer=function(){e.jqplot.AxisTickRenderer.call(this)},e.jqplot.PieTickRenderer.prototype=new e.jqplot.AxisTickRenderer,e.jqplot.PieTickRenderer.prototype.constructor=e.jqplot.PieTickRenderer}(jQuery);