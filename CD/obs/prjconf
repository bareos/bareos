%if 0%{?fedora_version} >= 24
# this is missing in https://build.opensuse.org/project/prjconf/Fedora:24
# and https://build.opensuse.org/project/prjconf/Fedora:25
Substitute: libqt4-devel qt-devel
%endif

%if 0%{?fedora_version}  >= 28 || 0%{?centos_version} > 7 || 0%{?rhel_version} > 7
prefer: jansson
%endif

prefer: cron

# xUbuntu18:
prefer: libcomerr2


# dist tag for Fedora, RHEL, CentOS. No effect on any other.
Release: <CI_CNT>.<B_CNT>%%{?dist}

%if 0%{?univention_version} > 0
Required: systemd
Required: dh-systemd
Required: ucslint
Required: univention-config-dev
Required: wget
%endif

# xUbuntu 14.04
prefer: libmysqlclient-dev

# rhel-7  
%if 0%{?rhel_version} > 7
Substitute: ceph-devel libcephfs1-devel librados2-devel
%endif

prefer: -dummy-release
prefer: sles-release
prefer: fedora-release

# problem showed up 2019-01-04
%if 0%{?centos_version} == 7
Preinstall: audit-libs
%endif


# special treatment so that systemd is used on debian

%if 0%{?debian_version} >= 800 || 0%{?ubuntu_version} >= 1504
# debian systemd support
Required: systemd
Required: dh-systemd
Required: glusterfs-common
%endif

%if 0%{?debian_version} >= 900 || 0%{?ubuntu_version} >= 1604
Preinstall: init-system-helpers
Preinstall: systemd
Required: libcephfs-dev
Required: librados-dev
Required: libradosstriper-dev
%endif


%if 0%{?univention_version} > 0
Required: systemd
Required: dh-systemd
Required: ucslint
Required: univention-config-dev
Required: wget
%endif
